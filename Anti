-- Variables
local user = game:GetService("Players").LocalPlayer
local bike = user.Character:WaitForChild("Bike")
local userRoot = user.Character:WaitForChild("HumanoidRootPart")
local bikeSpeed = 0

-- Bike Movement
function performWheelie()
    -- ทำการยกล้อจักรยาน
    if bike and bike:FindFirstChild("Body") then
        bike:FindFirstChild("Body").BodyVelocity.Velocity = Vector3.new(0, 50, bikeSpeed)
    end
end

-- Camera and Turning Control
function rotateCamera()
    -- หมุนกล้องทุกๆ 8 วินาที
    while wait(8) do
        game:GetService("TweenService"):Create(workspace.CurrentCamera, TweenInfo.new(0.5), {CFrame = workspace.CurrentCamera.CFrame * CFrame.Angles(0, math.rad(30), 0)}):Play()
    end
end

-- Bike Hovering (Lifting over obstacles)
function hoverOverObstacles()
    -- ลอยจักรยานข้ามสิ่งกีดขวาง
    while wait(0.1) do
        if bike and bike:FindFirstChild("Body") then
            local ray = Ray.new(userRoot.Position, Vector3.new(0, -5, 0))
            local hit, pos = workspace:FindPartOnRay(ray, user.Character)
            if hit then
                -- ตรวจจับว่ามีวัตถุข้างล่างหรือไม่
                bike:FindFirstChild("Body").BodyPosition.MaxForce = Vector3.new(10000, 10000, 10000)
                bike:FindFirstChild("Body").BodyPosition.Position = pos + Vector3.new(0, 3, 0)  -- ลอยขึ้น
            end
        end
    end
end

-- Main Loop for actions
while true do
    wait(20)  -- ยกจักรยาน
    performWheelie()
    
    if bike and bike:FindFirstChild("Body") then
        bikeSpeed = bike.BodyVelocity.Velocity.Magnitude
    end
end

-- Start functions
spawn(rotateCamera)
spawn(hoverOverObstacles)
