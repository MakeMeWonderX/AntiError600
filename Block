local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")
local camera = game.Workspace.CurrentCamera

-- ฟังก์ชั่นการเดินแบบสุ่ม
local function randomWalk()
    local randomPosition = Vector3.new(
        math.random(-50, 50),
        0,
        math.random(-50, 50)
    )
    humanoid:MoveTo(randomPosition)
end

-- ฟังก์ชั่นกระโดด
local function jump()
    if humanoid:GetState() == Enum.HumanoidStateType.Physics then
        humanoid:MoveTo(rootPart.Position + Vector3.new(0, 5, 0)) -- กระโดดสูง
        humanoid.Jump = true
    end
end

-- ฟังก์ชั่นหมุนกล้อง
local function rotateCamera()
    local angle = math.random(10, 30) -- หมุนกล้องระหว่าง 10 ถึง 30 องศา
    camera.CFrame = camera.CFrame * CFrame.Angles(0, math.rad(angle), 0)
end

-- ฟังก์ชั่นตรวจจับอุปสรรคและกระโดด
local function jumpOverObstacle()
    local ray = Ray.new(rootPart.Position, Vector3.new(0, -1, 0)) -- ตรวจจับอุปสรรคจากใต้เท้า
    local hit, position = game.Workspace:FindPartOnRay(ray, character)

    if hit and hit.CanCollide then
        -- ถ้ามีการชนกับอุปสรรค ให้กระโดด
        humanoid:MoveTo(rootPart.Position + Vector3.new(0, 5, 0)) -- กระโดด
        humanoid.Jump = true
    end
end

-- ฟังก์ชั่นเปลี่ยนเซิร์ฟเวอร์
local function hopToLowServer()
    local servers = game:GetService("TeleportService"):GetJoinableServers(game.PlaceId)
    local lowServer = nil
    for _, server in ipairs(servers) do
        if server.PlayerCount < 10 then
            lowServer = server
            break
        end
    end
    if lowServer then
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, lowServer.Id, player)
    end
end

-- ระบบการเดินสุ่ม, กระโดด, หมุนกล้อง, และกระโดดข้ามอุปสรรค
while true do
    wait(3) -- ทุก 3 วินาที
    randomWalk() -- เดินสุ่ม

    -- ตรวจจับและกระโดดข้ามอุปสรรค
    jumpOverObstacle()

    -- ทุก 10 วินาทีให้กระโดด
    if math.random() < 0.1 then
        jump()
    end

    -- ทุก 8 วินาทีหมุนกล้อง
    if tick() % 8 < 1 then
        rotateCamera()
    end

    -- ทุก 2.5 ชั่วโมงให้ลองเปลี่ยนเซิร์ฟเวอร์ไปที่เซิร์ฟเวอร์ที่มีผู้เล่นน้อย
    if tick() % (2.5 * 60 * 60) < 1 then
        hopToLowServer()
    end
end
